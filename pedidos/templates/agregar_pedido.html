{% extends 'base.html' %}
{% load static %}

{% block navbar %}
{% include 'home/navbar.html' %}
{% endblock navbar %}


{% block sidebar %}
{% include 'home/sidebar.html' %}
{% endblock sidebar %}

{% block content %}
<div class="container-fluid">
    <form method="POST">
        <div class="row">
            {% csrf_token%}
            <div class="col-md-4">
                <div class="tile">
                    <h3 class="tile-title">Agregar Pedido</h3>
                    <div class="tile-body">
                        <div class="form-group">
                            <label class="control-label">Clientes</label>
                            {{pedido.cliente}}
                        </div>
                        <div class="form-group">
                            <label class="control-label">Fecha Entrega</label>
                            {{pedido.fecha_entrega}}
                        </div>
                        <div class="form-group">
                            <label class="control-label">Estado</label>
                            {{pedido.estado}}
                        </div>
                    </div>
                </div>
                <div class="tile-footer">
                    <button class="btn btn-primary" type="submit">Registrar</button>
                </div>
            </div>
            <div class="col-md-7">
                <div class="tile">
                    <h3 class="tile-title">Agregar Productos del Pedido</h3>
                    <div class="tile-body">
                        {% for form in formset %}
                        <div class="form-group row xd">
                            <div class="col-md-6">
                                <label class="control-label">Producto</label>
                                {% if book.instance.pk %}{{ book.DELETE }}{% endif %}
                                {{form.producto}}
                            </div>
                            <div class="col-md-3">
                                <label class="control-label">Cantidad</label>
                                {{form.cantidad}}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        {{ formset.management_form }}
</div>
</form>
</div>
{% endblock%}


{% block scripts %}
<script type="text/javascript" src="{% static "js/plugins/formset/jquery.formset.js" %}"></script>
<script type="text/javascript" src="{% static "js/plugins/bootstrap-datepicker.min.js" %}"></script>
<!--Lenguage espaÃ±ol-->
<script type="text/javascript" src="{% static "js/plugins/bootstrap-datepicker.es.js" %}"></script>
<script type="text/javascript">
    /*Formset dynamic*/
    $(function () {
        $('.xd').formset({
            prefix: '{{ formset.prefix }}',
            addText: '+',
            deleteText: 'x',
            addCssClass: 'btn btn-success',
            deleteCssClass: 'btn btn-danger h-25 mt-4'
        });
    });
    /*Date Picker*/
    $('#datePick').datepicker({
            format: "dd/mm/yyyy",
            autoclose: true,
            todayHighlight: true,
            language:'es'
        });
</script>

{% endblock %}